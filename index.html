<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="appTitle">Chia tiền nhóm</title>
    <link rel="stylesheet" href="style/main.css">
</head>
<body>
    <header>
        <div id="lang-switcher">
            <button data-lang="vi">VI</button>
            <button data-lang="en">EN</button>
        </div>
        <h1 data-i18n-key="appTitle">Chi tiêu nhóm</h1>
        <p data-i18n-key="note">Ghi chú: (+) là tiền đã bỏ ra, (-) là tiền nhận lại.</p>
        <div class="creator-info">
            <span data-i18n-key="createdBy">Tạo bởi:</span> <a href="https://github.com/tri218138" target="_blank">tri218138</a>
            <iframe
                src="https://ghbtns.com/github-btn.html?user=tri218138&repo=team-sheet&type=star&count=true&size=large"
                frameborder="0" scrolling="0" width="170px" height="30px" title="GitHub"></iframe>
        </div>
    </header>

    <main>
        <section id="setup">
            <h2 data-i18n-key="setup">Thiết lập</h2>
            <div>
                <label for="num-members" data-i18n-key="numMembersLabel">Nhập số thành viên:</label>
                <input type="number" id="num-members" min="2" value="3">
                <button id="create-members-btn" data-i18n-key="createTableBtn">Tạo bảng</button>
            </div>
            <div id="members-names"></div>
        </section>

        <section id="expense-table-section">
            <h2 data-i18n-key="expenseTable">Bảng chi tiêu</h2>
            <table id="expense-table">
                <thead>
                    <tr>
                        <th rowspan="2" data-i18n-key="descriptionHeader">Nội dung</th>
                        <th rowspan="2" data-i18n-key="amountHeader">Số tiền</th>
                        <th rowspan="2" data-i18n-key="paidByHeader">Người trả</th>
                        <th id="users-header-group" colspan="3" data-i18n-key="usersHeader">Người dùng</th>
                        <th rowspan="2" data-i18n-key="actionsHeader"></th>
                    </tr>
                    <tr id="member-header-row">
                        <!-- Member names will be inserted here -->
                    </tr>
                </thead>
                <tbody>
                    <!-- Expense rows will be added here -->
                </tbody>
            </table>
            <button id="add-row-btn" data-i18n-key="addRowBtn">Thêm dòng</button>
        </section>

        <section id="summary-section">
            <h2 data-i18n-key="summaryTitle">Kết quả chia tiền</h2>
            <button id="calculate-btn" data-i18n-key="calculateBtn">Tính toán</button>
            <table id="summary-table">
                <thead>
                    <tr>
                        <th data-i18n-key="memberHeader">Thành viên</th>
                        <th data-i18n-key="paidHeader">Đã trả</th>
                        <th data-i18n-key="usedHeader">Đã dùng</th>
                        <th data-i18n-key="balanceHeader">Cần trả thêm (+) / Nhận lại (-)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Summary results will be displayed here -->
                </tbody>
            </table>
        </section>
        
        <section id="transaction-suggestion-section">
            <h2 data-i18n-key="transactionSuggestionTitle">Gợi ý chuyển tiền</h2>
            <div id="transactions">
                <!-- Transaction suggestions will be here -->
            </div>
        </section>

        <section id="file-operations">
            <h2 data-i18n-key="fileOperationsTitle">Thao tác với File</h2>
            <div class="file-buttons">
                <button id="export-json-btn" data-i18n-key="exportJsonBtn">Xuất JSON</button>
                <label for="import-json-input" class="file-label" data-i18n-key="importJsonBtn">Nhập JSON</label>
                <input type="file" id="import-json-input" accept=".json">
                <button id="download-pdf-btn" data-i18n-key="downloadPdfBtn">Tải PDF</button>
                <button id="download-excel-btn" data-i18n-key="downloadExcelBtn">Tải Excel</button>
                <button id="clear-all-btn" class="danger" data-i18n-key="clearAllBtn">Xóa toàn bộ</button>
            </div>
            <p class="note" data-i18n-key="jsonNote">Lưu ý: Import/Export JSON dùng để lưu và tải lại phiên làm việc.</p>
        </section>
    </main>

    <!-- External libraries for PDF and Excel export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <!-- Font for PDF export with Vietnamese support -->
    <script src="https://raw.githack.com/MrRio/jsPDF/master/src/libs/rawdeflate.js"></script>
    <script src="https://raw.githack.com/MrRio/jsPDF/master/src/libs/png_support/png.js"></script>
    <script src="https://raw.githack.com/MrRio/jsPDF/master/src/libs/png_support/zlib.js"></script>
    <script src="https://raw.githack.com/MrRio/jsPDF/master/src/libs/polyfill.js"></script>
    <script src="https://raw.githack.com/someatoms/jsPDF-CustomFonts-support/master/dist/Arimo-Regular-normal.js"></script>


    <script type="module" src="script/main.js"></script>
</body>
</html>
